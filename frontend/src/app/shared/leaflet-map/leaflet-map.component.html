<div style="height: 100%;" leaflet [leafletOptions]="options" (leafletMapReady)="onMapReady($event)">
  <div *ngIf="mapPlots$ | async as mapPlots">
    <div *ngFor="let mapPlot of mapPlots">
      <app-plot-layer [visible]="mapPlot.visible" [mapPlot]="mapPlot"></app-plot-layer>
    </div>
    <app-legend-colorbar *ngIf="activePlot$ | async as activePlot" [colorbar]="$any(activePlot.metadata)"></app-legend-colorbar>
  </div>

  <div [leafletLayersControl]="layersControl"></div>
</div>
